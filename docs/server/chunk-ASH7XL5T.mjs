import './polyfills.server.mjs';
import{a as X}from"./chunk-I7N7CHRL.mjs";import{a as R,c as B,d as q,e as z,f as $,g as Q,o as G,s as H}from"./chunk-TQFWEZNP.mjs";import{a as K}from"./chunk-JPBSXBQA.mjs";import{a as J}from"./chunk-ZNJQCMII.mjs";import{a as j}from"./chunk-XAMK3HJX.mjs";import"./chunk-OFO74N53.mjs";import{g as N}from"./chunk-DCP47WQH.mjs";import"./chunk-AYZFNQ2F.mjs";import"./chunk-GTSSCL6B.mjs";import{Ab as V,Bb as k,Cb as O,Db as d,Eb as v,Fb as A,Ia as w,Lb as L,Ma as a,Na as b,V as E,W as y,Ya as M,cb as _,ea as u,eb as c,fa as g,gb as D,ib as P,jb as S,lb as I,mb as T,nb as r,ob as o,pb as m,sb as h,ub as x,uc as U,vb as p,vc as W,zb as F}from"./chunk-OOMDIMHK.mjs";import"./chunk-VVCT4QZE.mjs";var Y=["f"];function Z(i,l){if(i&1){let t=h();r(0,"button",10),x("click",function(){u(t);let e=p(2);return g(e.addTenderTowhishList(e.expireDetail.id))}),m(1,"i",21),o()}}function ee(i,l){if(i&1){let t=h();r(0,"button",10),x("click",function(){u(t);let e=p(2);return g(e.addTenderTowhishList(e.expireDetail.id))}),m(1,"i",22),o()}}function te(i,l){if(i&1&&(r(0,"span",14),d(1),o()),i&2){let t=l.$implicit;a(),v(t.name)}}function ie(i,l){if(i&1&&(r(0,"div",25)(1,"div")(2,"div",26),m(3,"img",27),o()()()),i&2){let t=l.$implicit;a(3),c("src",t.media||t,w)}}function ne(i,l){if(i&1&&(r(0,"div")(1,"h4"),d(2,"\u0635\u0648\u0631 \u0627\u0644\u0645\u0646\u0627\u0642\u0635\u0647"),o(),r(3,"div",23),_(4,ie,4,1,"div",24),o()()),i&2){let t=p(2);a(4),c("ngForOf",t.imageUrl)}}function re(i,l){i&1&&m(0,"img",40)}function oe(i,l){i&1&&m(0,"img",41)}function ae(i,l){i&1&&m(0,"img",42)}function le(i,l){i&1&&(r(0,"label",43),d(1,"\u062A\u0628\u062F\u064A\u0644"),o())}function se(i,l){if(i&1){let t=h();r(0,"div",30)(1,"div")(2,"div",31),_(3,re,1,0,"img",32)(4,oe,1,0,"img",33)(5,ae,1,0,"img",34),o(),r(6,"div",35)(7,"div",36)(8,"input",37),x("change",function(e){u(t);let s=p(3);return g(s.onFileSelected(e,"other"))}),o()(),r(9,"button",38),x("click",function(){u(t);let e=p(3);return g(e.navigateToDocument(e.otherfile))}),d(10,"\u062A\u062D\u0645\u064A\u0644"),o(),_(11,le,2,0,"label",39),o()()()}if(i&2){let t=p(3);a(3),c("ngIf",t.otherfileType==="docx"),a(),c("ngIf",t.otherfileType==="pdf"),a(),c("ngIf",t.otherfileType==="txt"),a(6),c("ngIf",t.myExpire)}}function de(i,l){if(i&1&&(r(0,"div",28)(1,"h4"),d(2,"\u0645\u0644\u0641\u0627\u062A \u0627\u062E\u0631\u064A"),o(),_(3,se,12,4,"div",29),o()),i&2){let t=p(2);a(3),c("ngIf",t.otherfile)}}function ce(i,l){if(i&1){let t=h();r(0,"div",19)(1,"button",44),x("click",function(){u(t);let e=p(2);return g(e.addOffer=!0)}),d(2,"\u062A\u0642\u062F\u064A\u0645 \u0639\u0631\u0636"),o()()}}function pe(i,l){i&1&&(r(0,"span",48),d(1,"*"),o())}function me(i,l){i&1&&(r(0,"span",48),d(1,"*"),o())}function fe(i,l){if(i&1){let t=h();r(0,"div",61)(1,"div")(2,"div",26),m(3,"img",27),o(),r(4,"div",62)(5,"button",38),x("click",function(){let e,s=u(t).index;p(2);let f=O(1),C=p(2);return C.OfferImageUrl.splice(s,1),C.offer_images.splice(s,1),g(C.offer_images.length||(e=f.form.get("Offerimage"))==null?null:e.reset())}),m(6,"i",63),o()()()()}if(i&2){let t=l.$implicit;a(3),c("src",t.media||t,w)}}function _e(i,l){if(i&1&&(r(0,"div")(1,"div",59),_(2,fe,7,1,"div",60),o()()),i&2){let t=p(3);a(2),c("ngForOf",t.OfferImageUrl)}}function ue(i,l){i&1&&m(0,"img",40)}function ge(i,l){i&1&&m(0,"img",41)}function xe(i,l){i&1&&m(0,"img",42)}function he(i,l){if(i&1){let t=h();r(0,"div",30)(1,"div")(2,"div",31),_(3,ue,1,0,"img",32)(4,ge,1,0,"img",33)(5,xe,1,0,"img",34),o(),r(6,"div",35)(7,"div",36)(8,"input",64),x("change",function(e){u(t);let s=p(4);return g(s.onFileSelected(e,"Offerfile"))}),o()(),r(9,"button",38),x("click",function(){u(t);let e=p(4);return g(e.navigateToDocument(e.offerFile))}),d(10,"\u0639\u0631\u0636"),o(),r(11,"label",65),d(12,"\u062A\u0628\u062F\u064A\u0644"),o()()()()}if(i&2){let t=p(4);a(3),c("ngIf",t.offerFile_fileType==="docx"),a(),c("ngIf",t.offerFile_fileType==="pdf"),a(),c("ngIf",t.offerFile_fileType==="txt")}}function ve(i,l){if(i&1&&(r(0,"div",28),_(1,he,13,3,"div",29),o()),i&2){let t=p(3);a(),c("ngIf",t.offerFile)}}function Ce(i,l){if(i&1){let t=h();r(0,"form",45,0)(2,"div",28)(3,"h4",13),d(4,"\u062A\u0642\u062F\u064A\u0645 \u0639\u0631\u0636"),o(),r(5,"div",46)(6,"label",47),d(7,"\u0627\u062F\u062E\u0644 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644 "),r(8,"span",48),d(9,"*"),o()(),m(10,"textarea",49),r(11,"div",50)(12,"div",36)(13,"input",51),x("change",function(e){u(t);let s=p(2);return g(s.onFileSelected(e,"Offerfile"))}),o(),r(14,"label",52),m(15,"i",53),d(16,"\u0627\u0636\u0641 \u0645\u0644\u0641\u0627\u062A "),_(17,pe,2,0,"span",54),o()(),r(18,"div",36)(19,"input",55),x("change",function(e){u(t);let s=p(2);return g(s.onFileSelected(e,"Offerimage"))}),o(),r(20,"label",56),m(21,"i",57),d(22,"\u0627\u0636\u0641 \u0635\u0648\u0631 "),_(23,me,2,0,"span",54),o()()()(),r(24,"div",16),_(25,_e,3,1,"div",17)(26,ve,2,1,"div",18),o()(),r(27,"div",19)(28,"button",58),x("click",function(){u(t);let e=p(2);return g(e.submitOffer())}),d(29,"\u062A\u0642\u062F\u064A\u0645 \u0639\u0631\u0636"),o()()()}if(i&2){let t=O(1),n=p(2);a(17),c("ngIf",!n.offer_File),a(6),c("ngIf",!n.offer_images),a(2),c("ngIf",n.OfferImageUrl.length),a(),c("ngIf",n.offerFile),a(2),D("isDisabled",!t.valid)}}function be(i,l){if(i&1){let t=h();r(0,"div",2),m(1,"app-record",3),r(2,"div",4)(3,"div",5)(4,"h3",6),d(5),o(),r(6,"span",7),d(7),o()(),r(8,"div",5),m(9,"i",8),r(10,"div",5),_(11,Z,2,0,"button",9)(12,ee,2,0,"button",9),r(13,"button",10),x("click",function(){u(t);let e=p();return g(e.addTenderTowhishList(e.expireDetail.id))}),r(14,"p",11),d(15,"\u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u064A \u0627\u0644\u0645\u0641\u0636\u0644\u0629"),o()()()()(),r(16,"div",12)(17,"h5",13),d(18," \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 : "),r(19,"span",14),d(20),o()(),r(21,"h5",13),d(22," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u0644\u0644\u062A\u0648\u0627\u0635\u0644 : "),r(23,"span",14),d(24),o()(),r(25,"h5",13),d(26," \u062A\u062E\u0635\u0635 \u0627\u0644\u0635\u0641\u0642\u0629 : "),I(27,te,2,1,"span",14,S),o()(),r(29,"div",15)(30,"h4",6),d(31,"\u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),o(),r(32,"p"),d(33),o()(),r(34,"div",16),_(35,ne,5,1,"div",17)(36,de,4,1,"div",18),o(),_(37,ce,3,0,"div",19)(38,Ce,30,6,"form",20),o()}if(i&2){let t=p();a(),c("record",t.record),a(4),v(t.expireDetail.title),a(2),A("\u0645\u0646\u0630 ",t.transformDate(t.expireDetail.created_at)," \u0623\u064A\u0627\u0645"),a(4),c("ngIf",!t.inWishList()),a(),c("ngIf",t.inWishList()),a(8),v(t.expireDetail.company_name),a(4),v(t.expireDetail.phone),a(3),T(t.expireDetail.categories),a(6),v(t.expireDetail.desc),a(2),c("ngIf",t.imageUrl.length),a(),c("ngIf",t.otherfile),a(),P(37,t.addOffer?-1:37),a(),c("ngIf",t.addOffer)}}var ke=(()=>{let l=class l{constructor(n,e,s){this.route=n,this.ExpirationService=e,this.toastr=s,this.inWishList=M(!1),this.subs=new J,this.imageUrl=[],this.addOffer=!1,this.record=[],this.otherfileType="",this.myExpire=!1,this.OfferImageUrl=[],this.offerImageChange=!1,this.offerFileChange=!1,this.offerFile_fileType=""}ngOnInit(){this.expireId=this.route.snapshot.params.id,this.getDetails(),this.record=[{pageName:"\u0627\u0644\u0635\u0641\u062D\u0647 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0647",router:"/home"},{pageName:"\u062A\u0635\u0641\u064A\u0627\u062A \u0648 \u0647\u0648\u0627\u0644\u0643 \u062F\u0648\u0631\u064A\u0629",router:"/expiration/expire"},{pageName:"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0635\u0641\u0642\u0647",router:`/expiration/${this.expireId}/details`}]}getDetails(){this.subs.add(this.ExpirationService.getExpireDetails(this.expireId).subscribe(n=>{this.expireDetail=n.data,this.imageUrl=n.data.expiration_images,this.otherfile=n.data.expiration_files[0].media,this.otherfileType=this.otherfile?.includes("docx")?"docx":this.otherfile?.includes("pdf")?"pdf":"txt",n.data.is_favorite&&this.inWishList.update(()=>!0)}))}handleWhishlist(){this.inWishList.update(n=>!n)}transformDate(n){let e=new Date(n),f=new Date().getTime()-e.getTime();return Math.floor(f/(1e3*60*60*24))}addTenderTowhishList(n){this.handleWhishlist(),this.subs.add(this.ExpirationService.addexpireToWishlist(n).subscribe(e=>{e.data.is_favorite?(this.inWishList.update(()=>!0),this.toastr.success(e.messages)):(this.inWishList.update(()=>!1),this.toastr.success("Removed From your wishList"))},e=>{this.toastr.error(e.error.message)}))}navigateToDocument(n){if(typeof n=="string"){window.open(n,"_blank");return}let e=n,s=new FileReader;s.onload=()=>{let f=window.open();f?(f.document.write("<html><body>"),f.document.write('<iframe src="'+s.result+'" frameborder="0" style="border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" allowfullscreen></iframe>'),f.document.write("</body></html>")):alert("Please allow popups for this website.")},s.readAsDataURL(e)}onFileSelected(n,e){let s=n.target.files[0];n.target.files.length>1?Array.from(n.target.files).forEach(f=>{this.handleFile(f,e)}):this.handleFile(s,e)}handleFile(n,e){if(n){let s=new FileReader;s.onload=f=>{e==="image"&&(this.imageUrl.length<4?(this.imageUrl=[...new Set([...this.imageUrl,f.target.result])],this.tender_images>0?this.tender_images=[...new Set([...this.tender_images,n])]:this.tender_images=[n]):this.toastr.error("4 \u064A\u062C\u0628 \u0627\u0644\u0627 \u064A\u0632\u064A\u062F \u0639\u062F\u062F \u0627\u0644\u0635\u0648\u0631 \u0639\u0646 ")),e==="Offerimage"&&(this.OfferImageUrl.length<4?(this.OfferImageUrl=[...new Set([...this.OfferImageUrl,f.target.result])],this.offer_images>0?this.offer_images=[...new Set([...this.tender_images,n])]:this.offer_images=[n]):this.toastr.error("4 \u064A\u062C\u0628 \u0627\u0644\u0627 \u064A\u0632\u064A\u062F \u0639\u062F\u062F \u0627\u0644\u0635\u0648\u0631 \u0639\u0646 "),this.offerImageChange=!0),e==="Offerfile"&&(this.offer_File=n,this.offerFile=n,this.offerFile_fileType=n.name?.includes("docx")?"docx":n.name?.includes("pdf")?"pdf":"txt",this.offerFileChange=!0)},s.readAsDataURL(n)}}submitOffer(){if(this.addOffer=!0,this.form?.valid){let n=new FormData;this.offer_images&&this.offer_images.forEach((e,s)=>{n.append(`images[${s}]`,e)}),n.append("files[]",this.offer_File),n.append("desc",this.form.form.get("desc")?.value),this.ExpirationService.addexpireOffer(n,this.expireId).subscribe(e=>{this.addOffer=!1;let s=e.message==""?"\u062A\u0645  \u0627\u0644\u0627\u0636\u0627\u0641\u0647 \u0628\u0646\u062C\u0627\u062D":e.message;this.toastr.success(s)},e=>{this.toastr.error(e.error?.message||e)})}}ngOnDestroy(){this.subs.unsubscribe()}};l.\u0275fac=function(e){return new(e||l)(b(N),b(X),b(j))},l.\u0275cmp=y({type:l,selectors:[["app-expire-details"]],viewQuery:function(e,s){if(e&1&&F(Y,5),e&2){let f;V(f=k())&&(s.form=f.first)}},inputs:{inWishList:[E.SignalBased,"inWishList"]},outputs:{inWishList:"inWishListChange"},standalone:!0,features:[L],decls:1,vars:1,consts:[["f","ngForm"],["class","container mt-4",4,"ngIf"],[1,"container","mt-4"],[3,"record"],[1,"headerDetail"],[1,"d-flex","align-items-center"],[1,"fw-semibold"],[1,"me-4"],[1,"fa-solid","fa-share-nodes"],["class","button-no-style",3,"click",4,"ngIf"],[1,"button-no-style",3,"click"],[1,"m-0"],[1,"tenderMaker","mt-4"],[1,"fw-bold"],[1,"fs-6","me-1","fw-normal"],[1,"description","mt-4"],[1,"mt-4","w-100"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-5"],["action","",4,"ngIf"],[1,"fa-regular","fa-heart","mx-2"],[1,"fa-solid","text-danger","fa-heart","mx-2"],[1,"d-flex","justify-content-between","flex-wrap"],["class","image my-3",4,"ngFor","ngForOf"],[1,"image","my-3"],[1,"media"],["alt","",3,"src"],[1,"mt-4"],["class","files",4,"ngIf"],[1,"files"],[1,"fileType"],["src","./assets/image/word.svg","alt","",4,"ngIf"],["src","./assets/image/pdf.png","alt","",4,"ngIf"],["src","./assets/image/txt.png","alt","",4,"ngIf"],[1,"buttons"],[1,"m-1"],["hidden","","id","tender_other_files","type","file","accept",".xlsx,.doc, .docx,.txt,.pdf",3,"change"],["type","button",3,"click"],["for","tender_other_files",4,"ngIf"],["src","./assets/image/word.svg","alt",""],["src","./assets/image/pdf.png","alt",""],["src","./assets/image/txt.png","alt",""],["for","tender_other_files"],[1,"button-bgMain-txtWhite-radius",2,"border","none",3,"click"],["action",""],[1,"tendersInfo"],["for",""],[1,"text-danger"],["name","desc","id","desc","cols","30","placeholder","\u0627\u062F\u062E\u0644 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644","ngModel","","required",""],[1,"attachment"],["hidden","","id","Offerfile","type","file","ngModel","","name","Offerfile","accept",".xlsx,.doc, .docx,.txt,.pdf","required","",3,"change"],["for","Offerfile"],[1,"fa-solid","fa-book-open","ms-2"],["class","text-danger",4,"ngIf"],["name","Offerimage","ngModel","","hidden","","id","Offerimage","type","file","multiple","","accept","image/png, image/gif, image/jpeg,image/webp","required","",3,"change"],["for","Offerimage"],[1,"fa-regular","fa-image","ms-2"],["type","submit",1,"button-bgMain-txtWhite-radius",2,"border","none",3,"click"],[1,"d-flex","flex-wrap"],["class","image my-3 mx-3",4,"ngFor","ngForOf"],[1,"image","my-3","mx-3"],[1,"deleteButtonCorner"],[1,"fa-solid","fa-xmark"],["hidden","","id","offerFile","type","file","accept",".xlsx,.doc, .docx,.txt,.pdf",3,"change"],["for","offerFile"]],template:function(e,s){e&1&&_(0,be,39,12,"div",1),e&2&&c("ngIf",s.expireDetail)},dependencies:[W,H,Q,R,B,q,G,$,z,K,U],styles:[".headerDetail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center}.headerDetail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1d1d1d;font: 600 29px/55px Cairo}.headerDetail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191}.headerDetail[_ngcontent-%COMP%]   .dateDiff[_ngcontent-%COMP%]{color:#919191;font: 16px Cairo}.headerDetail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-of-type(2){color:#648dc4}.headerDetail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-of-type(2)   i[_ngcontent-%COMP%]{cursor:pointer}.headerDetail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-of-type(2)   p[_ngcontent-%COMP%]{cursor:pointer}@media (max-width: 383px){.headerDetail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type{flex-wrap:wrap}}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#919191;line-height:50px;word-spacing:2px}.moreInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#648dc4}.tendersInfo[_ngcontent-%COMP%]{width:50%;position:relative}.tendersInfo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:2px solid #e8e8e8;width:100%;height:3em;border-radius:1em 1em 0 0;font-size:1em;padding:10px;outline:none}.tendersInfo[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:2px solid #e8e8e8;width:100%;border-radius:0 0 1em 1em;font-size:1em;height:150px;padding:10px;resize:none;outline:none}.tendersInfo[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]{position:absolute;display:flex;flex-wrap:wrap;justify-content:space-between;bottom:16px;left:10px;right:10px}.tendersInfo[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#efefef;padding:5px 10px;border-radius:10px}.tendersInfo[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0;white-space:nowrap;border:none}@media (max-width: 992px){.tendersInfo[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:200px}}.attachFile[_ngcontent-%COMP%]{background-color:#efefef;padding:5px 10px;border-radius:10px}.attachFile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center}.deletIcon[_ngcontent-%COMP%]{width:25px;height:25px;margin-bottom:10px;display:flex;justify-content:center;align-items:center;border-radius:50%;cursor:pointer;color:#fff;background-color:#919191}.image[_ngcontent-%COMP%]{width:200px;height:220px;display:flex;justify-content:center;align-items:center;border:1px solid #efefef;padding:5px;border-radius:10px;position:relative}.image[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]{width:150px;height:150px;overflow:hidden;border-radius:10px}.image[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.image[_ngcontent-%COMP%]   .deleteButton[_ngcontent-%COMP%]{margin:3px auto;width:fit-content}.image[_ngcontent-%COMP%]   .deleteButton[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;border-radius:10px;border:none;color:#fff;background-color:#648dc4;padding:5px 0}.image[_ngcontent-%COMP%]   .deleteButtonCorner[_ngcontent-%COMP%]{position:absolute;top:-14px;right:-14px}.image[_ngcontent-%COMP%]   .deleteButtonCorner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50%;width:30px;height:30px;background-color:#648dc4;border:none;color:#fff}.files[_ngcontent-%COMP%]{width:200px;height:220px;display:flex;justify-content:center;align-items:center;overflow:hidden;border:1px solid #efefef;padding:5px;border-radius:10px}.files[_ngcontent-%COMP%]   .fileType[_ngcontent-%COMP%]{width:150px;height:150px;overflow:hidden;border-radius:10px}.files[_ngcontent-%COMP%]   .fileType[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.files[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:fit-content;margin:auto}.files[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80px;height:30px;border-radius:10px;color:#fff;background-color:#648dc4;border:none;margin-inline-end:5px}.files[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:80px;height:30px;border-radius:10px;color:#648dc4;background-color:transparent;border:1px solid #648dc4;margin-inline-end:5px;text-align:center}"]});let i=l;return i})();export{ke as ExpireDetailsComponent};
