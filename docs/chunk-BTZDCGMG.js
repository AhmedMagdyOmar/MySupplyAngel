import"./chunk-K7KGVCTP.js";import{a as D}from"./chunk-7P7266TJ.js";import{a as W}from"./chunk-VCUYZEKF.js";import{a as $,b as A,c as B}from"./chunk-PSWCPCDP.js";import"./chunk-PWQZ7GXW.js";import"./chunk-FPAQATQB.js";import{a as V}from"./chunk-ABUVBDXR.js";import{a as M}from"./chunk-PRRXSJOI.js";import{a as E}from"./chunk-WXSNHVFO.js";import"./chunk-57455PMJ.js";import{a as N}from"./chunk-7NGZH4SF.js";import{a as F}from"./chunk-BZNRHYBN.js";import"./chunk-WXI33M2S.js";import"./chunk-B24GJN2W.js";import{d as w}from"./chunk-QKFZZ2ZG.js";import"./chunk-VAADLS33.js";import{$a as T,Ab as C,Bb as S,Ib as I,Ja as s,Ka as c,Lb as j,Mb as O,Ob as x,W as v,bb as m,ea as p,fa as g,fb as l,ib as b,jb as L,kb as d,lb as a,mb as P,pb as _,rb as u,sb as h}from"./chunk-I3BRGV73.js";import{a as y}from"./chunk-CWTPBX7D.js";var k=(i,r)=>r.id,H=(i,r,n)=>({itemsPerPage:i,currentPage:r,totalItems:n});function q(i,r){if(i&1){let n=_();d(0,"div",7)(1,"app-info-details",9),u("addToWhishList",function(e){p(n);let o=h(2);return g(o.addTenderTowhishList(e))}),a()()}if(i&2){let n=r.$implicit;s(),m("inWishList",n.is_favorite)("details",n)("router","/tenders/"+n.id+"/tender-details")}}function z(i,r){if(i&1){let n=_();b(0,q,2,3,"div",7,k),O(2,"paginate"),d(3,"div",5)(4,"pagination-controls",8),u("pageChange",function(e){p(n);let o=h();return g(o.handlePagination(e))}),a()()}if(i&2){let n=h();L(x(2,0,n.tendersList,j(3,H,n.itemsPerPage,n.currentPage,n.totalItems)))}}function G(i,r){i&1&&(d(0,"div",6)(1,"h4"),C(2,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u0646\u0642\u0627\u0635\u0627\u062A \u0644\u0647\u0630\u0627 \u0627\u0644\u0642\u0637\u0627\u0639"),a()())}var ae=(()=>{let r=class r{constructor(t,e,o,f){this.route=t,this.CategoryService=e,this.TendersService=o,this.toastr=f,this.subs=new N,this.tendersList=[],this.itemsPerPage=15,this.currentPage=1,this.dataNotFound=!1,this.record=[{pageName:"\u0627\u0644\u0635\u0641\u062D\u0647 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0647",router:"/home"},{pageName:"\u0627\u0644\u0642\u0637\u0627\u0639\u0627\u062A",router:"/categories"}]}ngOnInit(){this.categoryId=this.route.snapshot.params.id,this.searchObj={category_id:this.categoryId},this.getCategories(),this.getTenders()}getCategories(){this.subs.add(this.CategoryService.getCategoryList().subscribe(t=>{this.categoryList=t.data,this.categoryObject=this.categoryList.find(e=>e.id==this.categoryId),this.record.push({pageName:this.categoryObject.name,router:`/categories/${this.categoryId}/tender`})}))}getTenders(){this.subs.add(this.CategoryService.getCategoryTender(this.searchObj,this.currentPage).subscribe(t=>{this.tendersList=t.data,this.dataNotFound=!this.tendersList.length,this.itemsPerPage=t.meta.per_page,this.totalItems=t.meta.total}))}addTenderTowhishList(t){this.TendersService.addTenderToWishlist(t.id).subscribe(e=>{e.data.is_favorite?this.toastr.success(e.messages):this.toastr.success("Removed From your wishList")},e=>{this.toastr.error(e.error.message)})}handleSearchObj(t){this.searchObj=y({},t),this.categoryId=t.category_id,this.categoryObject=this.categoryList.find(e=>e.id==this.categoryId),this.record[2]={pageName:this.categoryObject?.name,router:`/categories/${this.categoryId}/tender`},this.getTenders()}handlePagination(t){this.currentPage=t,this.getTenders()}ngOnDestroy(){this.subs.unsubscribe()}};r.\u0275fac=function(e){return new(e||r)(c(w),c(V),c(M),c(F))},r.\u0275cmp=v({type:r,selectors:[["app-list-category-tender"]],standalone:!0,features:[I],decls:9,vars:5,consts:[[1,"container"],[1,"d-flex","mb-4","mt-4"],[3,"record"],[1,"my-4"],[3,"searchObj","searchPlaceHolder"],[1,"text-center"],[1,"alert","alert-info","mt-4"],[1,"my-3"],[1,"my-pagination",3,"pageChange"],[3,"addToWhishList","inWishList","details","router"]],template:function(e,o){e&1&&(d(0,"div",0)(1,"div",1),P(2,"app-record",2),a(),d(3,"div",3)(4,"h5"),C(5),a()(),d(6,"app-search-input",4),u("searchObj",function(R){return o.handleSearchObj(R)}),a(),T(7,z,5,7,"div",5)(8,G,3,0,"div",6),a()),e&2&&(s(2),m("record",o.record),s(3),S(o.categoryObject==null?null:o.categoryObject.name),s(),m("searchPlaceHolder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0642\u0637\u0627\u0639"),s(),l(7,o.tendersList.length?7:-1),s(),l(8,o.dataNotFound?8:-1))},dependencies:[W,D,B,$,A,E]});let i=r;return i})();export{ae as ListCategoryTenderComponent};
